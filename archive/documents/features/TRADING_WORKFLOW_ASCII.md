# Trading System Workflow - Visual Diagram

## ASCII Flowchart

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          TRADING SYSTEM WORKFLOW                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌──────────────┐
│   📊 ANALYSIS │  4:00 PM
│  Generate Buy │
│ Recommendations│
└──────┬───────┘
       │
       ▼
┌──────────────────────┐
│   🛒 BUY ORDERS      │  4:05 PM
│                      │
│  ┌────────────────┐  │
│  │📋 Process New   │  │
│  │Recommendations │  │
│  └───────┬────────┘  │
│          │           │
│  ┌───────┴────────┐   │
│  │Check:          │   │
│  │• Portfolio     │   │
│  │• Balance       │   │
│  │• Duplicate     │   │
│  └───────┬────────┘   │
│          │            │
│  ┌───────┴───────┐    │
│  │ OK?            │    │
│  └───┬───────┬───┘    │
│  Yes │       │ No     │
│      │       │        │
│      ▼       ▼        │
│ ┌────────┐ ┌─────────┐│
│ │📤 Place│ │💾 Create││
│ │ Order  │ │Order in ││
│ │        │ │DB with  ││
│ │        │ │RETRY_   ││
│ │        │ │PENDING  ││
│ └───┬────┘ └────┬────┘│
│     │          │      │
│     └─────┬────┘      │
│           ▼            │
│  ┌──────────────┐      │
│  │🔄 Sync Status│      │
│  │  from Broker │      │
│  └──────┬───────┘      │
│         │              │
│  ┌──────┴──────┐       │
│  │   Status?   │       │
│  └─┬───┬───┬───┘       │
│    │   │   │           │
│ ┌──┘ ┌─┘ ┌─┘          │
│ ▼   ▼   ▼              │
│❌   ⏳   ✅             │
│REJ  PEND ONGOING       │
│     EXEC               │
└───────┬───────────┘
        │
        ▼
┌──────────────────────┐
│   ⏰ WAIT            │
│   Market Open        │
└───────┬──────────────┘
        │
   ┌────┴────┐
   │         │
   ▼         ▼
┌─────────┐ ┌──────────────┐
│🔄 Retry │ │🏪 MARKET     │
│8:00 AM  │ │  OPENS       │
│         │ │  9:15 AM     │
│Read from│ │              │
│DB:      │ │              │
│RETRY_   │ │              │
│PENDING  │ │              │
└────┬────┘ └──────┬───────┘
     │             │
     └──────┬──────┘
            │
            ▼
┌──────────────────────┐
│   ✅ BUY EXECUTES    │
│   Position: ONGOING  │
└───────┬──────────────┘
        │
        ▼
┌──────────────────────┐
│   📉 SELL MONITOR    │
│   (Continuous)       │
│                      │
│  ┌────────────────┐  │
│  │ Place Sell     │  │
│  │ at EMA9        │  │
│  └───────┬────────┘  │
│          │           │
│          ▼           │
│  ┌────────────────┐  │
│  │ Monitor Every  │  │
│  │   60 seconds   │  │
│  └───────┬────────┘  │
│          │           │
│    ┌─────┴─────┐     │
│    │ EMA9      │     │
│    │ Dropped?  │     │
│    └───┬───┬───┘     │
│     Yes│   │No      │
│        │   │        │
│        ▼   ▼        │
│  ┌────────┐ ┌──────┐│
│  │📉 Lower│ │Check ││
│  │ Price  │ │Exec? ││
│  └────┬───┘ └──┬───┘│
│       │        │    │
│       └───┬────┘    │
│           │         │
│      ┌────┴────┐    │
│      │Executed?│    │
│      └───┬──┬──┘    │
│       Yes│  │No     │
│          │  │       │
│          ▼  ▼       │
│    ┌────────┐ ┌────┐│
│    │✅ CLOSE│ │Loop││
│    │Position│ │Back││
│    └────┬────┘ └────┘│
│         │           │
│         ▼           │
│  ┌──────────────┐   │
│  │📝 Update     │   │
│  │   History    │   │
│  │   & P&L      │   │
│  └──────────────┘   │
└──────────────────────┘
        │
        ▼
┌──────────────────────┐
│   🧹 EOD CLEANUP     │
│   6:00 PM            │
└───────┬──────────────┘
        │
        ▼
┌──────────────────────┐
│   🌅 NEXT DAY        │
└───────┬──────────────┘
        │
        └──────────────┐
                       │
                       ▼
              (Back to Analysis)

═══════════════════════════════════════════════════════════════════════════════

ORDER STATUS FLOW:

    AMO
     │
     ▼
PENDING_EXECUTION ──┐
     │              │
     ├─→ REJECTED   │
     │              │
     ├─→ CANCELLED  │
     │              │
     ├─→ RETRY_     │
     │   PENDING ───┼─→ (Retry at 8:00 AM)
     │              │
     └─→ ONGOING ───┼─→ CLOSED
                    │
              (Sell Order Executes)

═══════════════════════════════════════════════════════════════════════════════

KEY TIMELINE:

4:00 PM  → Analysis runs
4:05 PM  → Buy orders placed
8:00 AM  → Pre-market retry
9:15 AM  → Market opens, AMO executes
9:15 AM+ → Sell monitoring (continuous)
6:00 PM  → End of day cleanup

═══════════════════════════════════════════════════════════════════════════════
```
